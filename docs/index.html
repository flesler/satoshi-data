<!DOCTYPE html>
<html>
	<head>
		<title>Q&As of Satoshi Nakamoto</title>
		<style type="text/css">
			body { margin: 0; }
			.qa { border-bottom: 1px solid black; padding: 10px; }
			.ignore { background-color: #EEE; opacity: 0.7; }
			.ignore::before { content: "‚ùå"; }
			.hide-ignored .ignore { display: none; }
			.favorite { background-color: lightyellow; }
			.favorite::before { content: "‚≠êÔ∏è"; }
			.gpt-4::before { content: "ü§ñ"; }
			p { margin: 10px 0 0 0; }
		</style>
	</head>
	<body class="hide-ignored">
    <label id="show-ignored">
      <input type="checkbox" /> Show Ignored
    </label>
    <div id="qas"></div>
    <script type="text/javascript">
      const xhr = new XMLHttpRequest()
      xhr.onreadystatechange = () => {
        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
          renderQAs(JSON.parse(xhr.responseText))
        }
      }
      xhr.open('GET', './qa.json', true)
      xhr.send()

      const toHTML = (text) => {
        return text.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '<br/>')
      }
      const renderQAs = (qas) => {
        const html = qas.map(i => `<div class="qa ${i.type || ''}">
          <a id="${i.id}" href="#${i.id}">#${i.id}</a> - ${i.date} - <a href="${i.src}" target="_blank">${i.src}</a>
          <p><b>User</b> (${i.q.length} chars): ${toHTML(i.q)}</p>
          <p><b>Satoshi</b> (${i.a.length} chars): ${toHTML(i.a)}</p>
        </div>`).join('')
        document.getElementById('qas').innerHTML = html
      }

      document.getElementById('show-ignored').onclick = (e) => {
        const check = e.currentTarget.querySelector('input')
        document.body.className = check.checked ? '' : 'hide-ignored'
      }
    </script>
	</body>
</html>